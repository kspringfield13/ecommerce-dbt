# Ecommerce Analytics with dbt & DuckDB

A lean, end-to-end dbt pipeline that ingests raw ecommerce CSVs into DuckDB, applies staging and transformation models, and builds curated marts for customers, orders, and revenueâ€”complete with schema tests, autogenerated docs, and CI-ready configs.

---

## ðŸš€ Quickstart

1. **Clone the repo**  
   ```bash
   git clone git@github.com:your-username/ecommerce-dbt.git
   cd ecommerce-dbt

2. **Install dependencies**
   ```bash
   pip install dbt-core dbt-duckdb

3. **Install DuckDB CLI**

   Chocolately(Windows)
   ```bash
   choco install duckdb

4. **Configure your profile**

   Install dbt and configure profile: ~/.dbt/profiles.yml and set:

   ```yaml
   ecommerce:
     outputs:
       dev:
         type: duckdb
         path: dev.duckdb
         threads: 1

       prod:
         type: duckdb
         path: prod.duckdb
         threads: 4

     target: dev

5. **Load raw CSVs**

   Can download CSVs here:
   https://www.kaggle.com/datasets/mustafakeser4/looker-ecommerce-bigquery-dataset 

   Small static files as seeds:

   Add .csv files to your projectâ€™s seeds/ directory
   ```bash
   dbt seed
   
   Large files load into duckdb using CLI:

   ```bash
   CREATE SCHEMA IF NOT EXISTS ecommerce;

   -- repeat for the remaining large .csv files
   CREATE TABLE ecommerce.users AS SELECT * FROM read_csv_auto('users.csv');

6. **Build models & run tests**
   ```bash
   dbt run
   dbt test

7. **Browse docs locally**
   ```bash
   dbt docs generate
   dbt docs serve

**Repo structure**
```txt
â”œâ”€â”€ data/                 # raw CSVs (orders.csv, users.csv, products.csv)
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ staging/          # raw â†’ cleaned staging tables
â”‚   â”œâ”€â”€ marts/            # curated customer, orders, revenue models
â”‚   â””â”€â”€ sources.yml       # source definitions for raw tables
â”œâ”€â”€ macros/               # reusable SQL snippets & tests
â”œâ”€â”€ snapshots/            # historical snapshots (if needed)
â”œâ”€â”€ tests/                # custom tests
â”œâ”€â”€ dbt_project.yml       # project configuration
â”œâ”€â”€ profiles.example.yml  # template for your local profiles.yml
â””â”€â”€ .gitignore            # ignores dev.duckdb, CSVs, artifacts

---

**Resources**
dbt docs: https://docs.getdbt.com/docs/introduction
dbt blog: https://blog.getdbt.com/

**Enjoy!**